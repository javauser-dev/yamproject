<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>예약 상세 정보</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/customer/reserve/reserveInquiryDetail.css}">
    <style>
     /* 테이블 스타일 */
      .reserve-table { width: 100%; border-collapse: collapse;}
      .reserve-table th, .reserve-table td { border: 1px solid #ddd; padding: 8px; text-align: center;}
      .reserve-table th { background-color: #f2f2f2; }

      /* 버튼 그룹 스타일 */
      .button-group { text-align: center; margin-bottom: 10px; }
      .button-group a { margin: 0 5px; display: inline-block;}
       .button-group button{ margin-top: 5px;}
    </style>
</head>
<body>
    <h1>예약 상세 정보</h1>

    <table class="reserve-table">
        <thead>
            <tr>
                <th>예약 번호</th>
                <th>가게 이름</th>
                <th>예약 날짜</th>
                <th>예약 시간</th>
                <th>인원 수</th>
                <th>예약금</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td th:text="${reserve.id}"></td>
                <td th:text="${reserve.shop.shopName}"></td>
                <td th:text="${#temporals.format(reserve.reserveDate, 'yyyy.MM.dd')}"></td>
                <td th:text="${#temporals.format(reserve.reserveTime, 'HH:mm')}"></td>
                <td th:text="${reserve.guestCount} + '명'"></td>
                <td th:text="${reserve.deposit} + '원'"></td>
            </tr>
        </tbody>
    </table>
    
    <hr />
    <h1>지도표시</h1>
    
    <hr />

	<div class="button-group">
        <a th:href="@{/customer/reserve/updateForm(id=${reserve.id})}">
            <button type="button">예약 수정</button>
        </a>
        <!-- 예약 취소 버튼 (onclick 이벤트 추가) -->
        <button type="button" th:onclick="confirmCancel([[${reserve.id}]], [[${reserve.reserveCheck}]])">예약 취소</button>
    </div>

    <a th:href="@{/customer/reserve/reserveInquiry}">
        <button type="button">목록으로 돌아가기</button>
    </a>

	<!-- JavaScript 추가 -->
    <script th:inline="javascript">
    function confirmCancel(reserveId, reserveCheck) {
        if (reserveCheck === 0) {
            if (confirm("예약을 취소하시겠습니까?")) {
                // 올바른 URL 생성 방법:
            	var urlTemplate = /*[[@{'/customer/reserve/cancel'}]]*/ ''; // 타임리프를 사용해 URL의 기본 경로 렌더링
                var url = urlTemplate + "?id=" + reserveId; // 자바스크립트로 동적으로 변수 추가
                window.location.href = url;
            }
        } else {
            alert("매장이 예약을 승인한 상태입니다. 매장에 직접 연락하세요.");
        }
    }
    </script>
</body>
</html>