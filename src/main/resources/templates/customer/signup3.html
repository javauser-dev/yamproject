<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>회원가입</title>
    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script th:src="@{/js/signup.js}"></script> <!-- js 파일 경로 확인 -->
    <style>
        .error-message { color: red; }
        .verified { /* 인증 완료 버튼 스타일 */
            background-color: #ccc;
            color: #666;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <h1>회원가입</h1>

    <form id="signupForm" th:action="@{/customer/signup}" th:object="${memberSignupRequest}" method="post">
        <div>
            <label for="customerId">아이디:</label>
            <input type="text" id="customerId" name="customerId" th:field="*{customerId}" required/>
            <span id="customerIdError" class="error-message"></span>
        </div>
        <div>
            <label for="customerPassword">비밀번호:</label>
            <input type="password" id="customerPassword" name="customerPassword" th:field="*{customerPassword}" required/>
             <span th:if="${#fields.hasErrors('customerPassword')}" th:errors="*{customerPassword}"></span>
        </div>
        <div>
            <label for="customerNickname">닉네임:</label>
            <input type="text" id="customerNickname" name="customerNickname" th:field="*{customerNickname}" required/>
            <span id="customerNicknameError" class = "error-message"></span>
        </div>
        <div>
            <label for="customerName">이름:</label>
            <input type="text" id="customerName" name="customerName" th:field="*{customerName}" required/>
        </div>
        <div>
            <label for="customerEmail">이메일:</label>
            <input type="email" id="customerEmail" name="customerEmail" th:field="*{customerEmail}" required/>
            <button type="button" id="sendVerificationCodeBtn">인증번호받기</button> <!-- 버튼 추가 -->
            <span th:if="${#fields.hasErrors('customerEmail')}" th:errors="*{customerEmail}"></span>

            <!-- 인증 번호 입력 필드 (처음에는 숨김) -->
            <div id="verificationCodeDiv" style="display: none;">
                <label for="verificationCode">인증번호:</label>
                <input type="text" id="verificationCode" name="verificationCode" required/>
                <button type="button" id="verifyCodeBtn">인증하기</button>
            </div>
        </div>
        <div>
            <label for="customerBirthDate">생년월일:</label>
            <input type="date" id="customerBirthDate" name="customerBirthDate" th:field="*{customerBirthDate}" required/>
            <span th:if="${#fields.hasErrors('customerBirthDate')}" th:errors="*{customerBirthDate}"></span>
        </div>
        <div>
		    <label>성별:</label>
		    <input type="radio" id="male" name="customerGender" th:field="*{customerGender}" value="M" required/>
		    <label for="male">남성</label>
		    <input type="radio" id="female" name="customerGender" th:field="*{customerGender}" value="F" required/>
		    <label for="female">여성</label>
		</div>
        <div>
            <input type="checkbox" id="agree" name="agree" th:field="*{agree}" required/>
            <label for="agree">회원가입에 동의합니다.</label>
            <span th:if="${#fields.hasErrors('agree')}" th:errors="*{agree}"></span>
        </div>
        <div>
            <button type="submit">회원가입</button>
        </div>
         <!-- 에러 메시지 표시 -->
        <div th:if="${errorMessage}" style="color: red;">
            <p th:text="${errorMessage}"></p>
        </div>
    </form>
</body>
</html>